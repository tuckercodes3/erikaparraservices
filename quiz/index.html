<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="facebook-domain-verification" content="dw0x17kt2ot8vdy4telrbvogt2ioif" />
  <title>Erika Parra Services ‚Äî Consulta Gratuita</title>
  <meta name="description" content="Responde unas preguntas y te conectamos con nuestra especialista de inmigraci√≥n.">
  <meta property="og:title" content="Consulta Gratuita ‚Äî Erika Parra Services">
  <meta property="og:description" content="Responde unas preguntas y conecta con Erika para evaluar tu caso de inmigraci√≥n.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://erikaparraservices.com/quiz/">
  <meta property="og:locale" content="es_US">
  <meta property="og:site_name" content="Erika Parra Services">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@600;700&family=Outfit:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

  <!-- Meta Pixel Code -->
  <script>
    !function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
    n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
    document,'script','https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '599511379777017');
    fbq('track', 'PageView');
  </script>
  <noscript><img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=599511379777017&ev=PageView&noscript=1" /></noscript>

  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --navy: #1B3550;
      --navy-deep: #0F2237;
      --navy-light: #2C5282;
      --gold: #C9993A;
      --gold-soft: rgba(201, 153, 58, 0.08);
      --gold-line: rgba(201, 153, 58, 0.35);
      --red: #C53030;
      --red-soft: #FFF5F5;
      --green-wa: #25D366;
      --green-hover: #1DAF54;
      --white: #FFFFFF;
      --off-white: #FAFAF8;
      --cream: #F7F5F0;
      --gray-100: #F1EFEC;
      --gray-200: #E2DFDB;
      --gray-400: #A8A29E;
      --gray-600: #6B6560;
      --gray-800: #292524;
      --shadow-sm: 0 1px 3px rgba(0,0,0,0.04);
      --shadow-md: 0 4px 20px rgba(0,0,0,0.06);
      --radius: 12px;
    }

    html { height: 100%; }

    body {
      font-family: 'Outfit', -apple-system, sans-serif;
      color: var(--gray-800);
      background: linear-gradient(180deg, #FAF8F3 0%, var(--off-white) 300px, var(--off-white) 100%);
      min-height: 100%;
      display: flex;
      flex-direction: column;
      -webkit-font-smoothing: antialiased;
      line-height: 1.6;
    }

    /* ‚îÄ‚îÄ NAV ‚îÄ‚îÄ */
    .nav {
      background: var(--white);
      border-bottom: 1px solid var(--gray-200);
      padding: 12px 24px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .nav-logo { height: 40px; width: auto; }
    .lang-toggle {
      display: flex;
      background: var(--gray-100);
      border-radius: 8px;
      overflow: hidden;
      border: 1px solid var(--gray-200);
    }
    .lang-btn {
      padding: 6px 14px;
      font-size: 13px;
      font-weight: 600;
      border: none;
      background: none;
      color: var(--gray-400);
      cursor: pointer;
      transition: all 0.2s;
      font-family: inherit;
    }
    .lang-btn.active { background: var(--navy); color: var(--white); }

    /* ‚îÄ‚îÄ TRUST BAR ‚îÄ‚îÄ */
    .quiz-trust-bar {
      background: var(--gold-soft);
      padding: 9px 24px;
      text-align: center;
      font-size: 12px;
      color: var(--gold);
      font-weight: 500;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      flex-wrap: wrap;
      border-bottom: 1px solid var(--gray-100);
      letter-spacing: 0.2px;
    }
    .trust-stars { letter-spacing: 1px; }
    .trust-dot { opacity: 0.5; }

    /* ‚îÄ‚îÄ PROGRESS ‚îÄ‚îÄ */
    .progress-wrap {
      padding: 20px 24px 0;
      max-width: 560px;
      margin: 0 auto;
      width: 100%;
    }
    .progress-text {
      font-size: 13px;
      color: var(--gray-600);
      font-weight: 500;
      margin-bottom: 10px;
      letter-spacing: 0.2px;
    }
    .progress-bar { height: 6px; background: var(--gray-200); border-radius: 6px; overflow: hidden; }
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--gold), #D4A84A);
      border-radius: 6px;
      transition: width 0.5s cubic-bezier(0.16, 1, 0.3, 1);
      width: 0%;
    }

    /* ‚îÄ‚îÄ QUIZ ‚îÄ‚îÄ */
    .quiz-wrap {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 32px 24px 48px;
    }
    .quiz-card { max-width: 560px; width: 100%; }
    .step { display: none; }
    .step.active { display: block; animation: slideIn 0.4s cubic-bezier(0.16, 1, 0.3, 1); }

    @keyframes slideIn {
      from { opacity: 0; transform: translateY(16px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .step-question {
      font-family: 'Cormorant Garamond', Georgia, serif;
      font-size: clamp(24px, 5vw, 34px);
      font-weight: 700;
      color: var(--navy);
      line-height: 1.2;
      margin-bottom: 8px;
      letter-spacing: -0.3px;
    }
    .step-sub {
      font-size: 15px;
      color: var(--gray-600);
      font-weight: 300;
      margin-bottom: 28px;
      line-height: 1.7;
    }

    /* ‚îÄ‚îÄ WELCOME SCREEN (concept-specific) ‚îÄ‚îÄ */
    .welcome-hero {
      text-align: center;
      padding: 8px 0 0;
    }
    .welcome-hero .welcome-icon {
      font-size: 48px;
      margin-bottom: 16px;
      display: block;
    }
    .welcome-hero .welcome-headline {
      font-family: 'Cormorant Garamond', Georgia, serif;
      font-size: clamp(26px, 5.5vw, 38px);
      font-weight: 700;
      color: var(--navy);
      line-height: 1.2;
      margin-bottom: 12px;
      letter-spacing: -0.3px;
    }
    .welcome-hero .welcome-sub {
      font-size: 16px;
      color: var(--gray-600);
      font-weight: 300;
      line-height: 1.7;
      margin-bottom: 24px;
      max-width: 440px;
      margin-left: auto;
      margin-right: auto;
    }
    .welcome-checks {
      text-align: left;
      display: inline-block;
      margin-bottom: 28px;
    }
    .welcome-checks div {
      font-size: 14px;
      color: var(--gray-800);
      padding: 5px 0;
      font-weight: 400;
    }
    .welcome-checks div span { color: var(--gold); margin-right: 8px; font-weight: 700; }

    .btn-start {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 16px 40px;
      background: var(--navy);
      border: none;
      border-radius: 100px;
      font-family: inherit;
      font-size: 16px;
      font-weight: 700;
      color: var(--white);
      cursor: pointer;
      transition: all 0.25s ease;
      box-shadow: 0 4px 16px rgba(27,53,80,0.2);
    }
    .btn-start:hover { background: var(--navy-light); transform: translateY(-1px); }
    .btn-start svg { width: 18px; height: 18px; }

    .welcome-time {
      font-size: 12px;
      color: var(--gray-400);
      margin-top: 12px;
      font-weight: 400;
    }

    /* ‚îÄ‚îÄ TRUST CALLOUT ‚îÄ‚îÄ */
    .trust-callout {
      display: flex;
      align-items: flex-start;
      gap: 10px;
      background: linear-gradient(135deg, rgba(201,153,58,0.06), rgba(201,153,58,0.02));
      border: 1px solid var(--gold-line);
      border-radius: 10px;
      padding: 14px 16px;
      margin-bottom: 24px;
      font-size: 13px;
      color: var(--gray-600);
      line-height: 1.6;
    }
    .trust-callout svg {
      width: 18px; height: 18px; stroke: var(--gold); fill: none; stroke-width: 2.5; flex-shrink: 0; margin-top: 1px;
    }

    /* ‚îÄ‚îÄ INLINE TESTIMONIAL ‚îÄ‚îÄ */
    .inline-testimonial {
      background: var(--white);
      border: 1px solid var(--gray-200);
      border-left: 3px solid var(--gold);
      border-radius: 10px;
      padding: 16px 18px;
      margin-bottom: 28px;
    }
    .inline-testimonial p {
      font-size: 14px; color: var(--gray-800); font-style: italic; line-height: 1.6; margin-bottom: 6px;
    }
    .inline-testimonial .testimonial-attr {
      font-size: 12px; color: var(--gold); font-weight: 600; font-style: normal;
    }

    /* ‚îÄ‚îÄ OPTIONS ‚îÄ‚îÄ */
    .options { display: flex; flex-direction: column; gap: 10px; }
    .option {
      display: flex;
      align-items: center;
      gap: 14px;
      padding: 18px 20px;
      background: var(--white);
      border: 1px solid var(--gray-200);
      border-left: 3px solid transparent;
      border-radius: var(--radius);
      cursor: pointer;
      transition: all 0.25s ease;
      font-family: inherit;
      font-size: 15px;
      font-weight: 500;
      color: var(--gray-800);
      text-align: left;
      width: 100%;
      box-shadow: var(--shadow-sm);
    }
    .option:hover { border-color: var(--gold-line); border-left-color: var(--gold); box-shadow: var(--shadow-md); }
    .option.selected { border-color: var(--gold-line); border-left-color: var(--gold); background: var(--gold-soft); box-shadow: var(--shadow-md); }
    .option-icon {
      width: 44px; height: 44px; border-radius: 10px; background: var(--gold-soft);
      display: flex; align-items: center; justify-content: center; flex-shrink: 0; font-size: 18px;
    }
    .option.selected .option-icon { background: rgba(201, 153, 58, 0.15); }
    .option-text { flex: 1; }
    .option-label { font-weight: 600; font-size: 15px; color: var(--gray-800); }
    .option-desc { font-size: 13px; color: var(--gray-400); font-weight: 300; margin-top: 2px; line-height: 1.4; }
    .option-check {
      width: 22px; height: 22px; border: 2px solid var(--gray-200); border-radius: 50%;
      flex-shrink: 0; display: flex; align-items: center; justify-content: center; transition: all 0.25s ease;
    }
    .option.selected .option-check { border-color: var(--gold); background: var(--gold); }
    .option.selected .option-check::after { content: ''; width: 8px; height: 8px; border-radius: 50%; background: var(--white); }

    /* ‚îÄ‚îÄ INPUTS ‚îÄ‚îÄ */
    .input-group { margin-bottom: 16px; }
    .input-label { font-size: 13px; font-weight: 600; color: var(--gray-600); margin-bottom: 6px; display: block; }
    .input-field {
      width: 100%; padding: 14px 16px; background: var(--white); border: 1px solid var(--gray-200);
      border-radius: var(--radius); font-family: inherit; font-size: 16px; color: var(--gray-800);
      outline: none; transition: border-color 0.2s, box-shadow 0.2s; box-shadow: var(--shadow-sm);
    }
    .input-field:focus { border-color: var(--gold); box-shadow: 0 0 0 3px var(--gold-soft); }
    .input-field::placeholder { color: var(--gray-400); }
    .input-row { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
    select.input-field {
      appearance: none;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%23A8A29E' stroke-width='2.5' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 16px center;
      padding-right: 40px;
    }

    /* ‚îÄ‚îÄ BUTTONS ‚îÄ‚îÄ */
    .btn-row { display: flex; gap: 12px; margin-top: 32px; }
    .btn-back {
      padding: 14px 24px; background: var(--white); border: 1px solid var(--gray-200);
      border-radius: 100px; font-family: inherit; font-size: 15px; font-weight: 600;
      color: var(--gray-600); cursor: pointer; transition: all 0.2s; box-shadow: var(--shadow-sm);
    }
    .btn-back:hover { background: var(--gray-100); }
    .btn-next {
      flex: 1; padding: 14px 24px; background: var(--navy); border: none; border-radius: 100px;
      font-family: inherit; font-size: 15px; font-weight: 700; color: var(--white);
      cursor: pointer; transition: all 0.25s ease; box-shadow: 0 4px 16px rgba(27,53,80,0.2);
    }
    .btn-next:hover { background: var(--navy-light); transform: translateY(-1px); }
    .btn-next:disabled { opacity: 0.35; cursor: not-allowed; transform: none; box-shadow: none; }

    /* ‚îÄ‚îÄ WHATSAPP CTA ‚îÄ‚îÄ */
    .btn-wa {
      display: inline-flex; align-items: center; justify-content: center; gap: 10px;
      width: 100%; padding: 18px 32px; background: var(--green-wa); border: none;
      border-radius: 100px; font-family: inherit; font-size: 17px; font-weight: 700;
      color: var(--white); cursor: pointer; text-decoration: none; transition: all 0.25s ease;
      box-shadow: 0 4px 20px rgba(37,211,102,0.3); margin-top: 28px;
      animation: ctaPulse 2.5s ease-in-out infinite;
    }
    .btn-wa:hover { background: var(--green-hover); transform: translateY(-2px); }
    .btn-wa svg { width: 22px; height: 22px; }
    @keyframes ctaPulse {
      0%, 100% { box-shadow: 0 4px 20px rgba(37,211,102,0.3); }
      50% { box-shadow: 0 4px 28px rgba(37,211,102,0.45); }
    }
    .wa-subtext { text-align: center; font-size: 13px; color: var(--gray-400); margin-top: 10px; }

    /* ‚îÄ‚îÄ SUMMARY ‚îÄ‚îÄ */
    .summary-list { display: flex; flex-direction: column; gap: 8px; margin-bottom: 24px; }
    .summary-item {
      display: flex; justify-content: space-between; align-items: center; padding: 14px 18px;
      background: var(--white); border: 1px solid var(--gray-200); border-left: 3px solid var(--gold);
      border-radius: 8px; box-shadow: var(--shadow-sm);
    }
    .summary-label { font-size: 12px; color: var(--gray-400); font-weight: 500; text-transform: uppercase; letter-spacing: 0.5px; }
    .summary-value { font-size: 14px; color: var(--navy); font-weight: 600; text-align: right; }

    /* ‚îÄ‚îÄ OVERFLOW ‚îÄ‚îÄ */
    .overflow-notice {
      background: var(--red-soft); border: 1px solid #FED7D7; border-radius: var(--radius); padding: 16px; margin-bottom: 24px;
    }
    .overflow-notice p { font-size: 14px; color: var(--red); font-weight: 500; line-height: 1.6; }

    /* ‚îÄ‚îÄ FOOTER ‚îÄ‚îÄ */
    .trust-footer { padding: 24px; text-align: center; border-top: 1px solid var(--gray-200); background: var(--cream); }
    .trust-footer p { font-size: 11px; color: var(--gray-400); line-height: 1.6; max-width: 480px; margin: 0 auto; }
    .trust-badges { display: flex; align-items: center; justify-content: center; gap: 24px; margin-bottom: 12px; }
    .trust-badge { display: flex; align-items: center; gap: 6px; font-size: 12px; color: var(--gray-600); font-weight: 500; }
    .trust-badge svg { width: 14px; height: 14px; stroke: var(--gold); fill: none; stroke-width: 2.5; stroke-linecap: round; stroke-linejoin: round; }

    @media (max-width: 640px) {
      .quiz-wrap { padding: 24px 16px 40px; }
      .option { padding: 16px; }
      .option-icon { width: 40px; height: 40px; font-size: 16px; }
      .quiz-trust-bar { font-size: 11px; gap: 5px; padding: 8px 16px; }
      .step-sub { margin-bottom: 24px; font-size: 14px; }
      .progress-wrap { padding: 16px 16px 0; }
      .nav { padding: 10px 16px; }
      .nav-logo { height: 34px; }
      .btn-wa { padding: 16px 28px; font-size: 16px; }
      .input-row { grid-template-columns: 1fr; }
      .welcome-hero .welcome-headline { margin-bottom: 10px; }
    }
  </style>
</head>
<body>

  <!-- NAV with logo -->
  <nav class="nav">
    <a href="../"><img src="../assets/logo.png" alt="Erika Parra Services" class="nav-logo"></a>
    <div class="lang-toggle">
      <button class="lang-btn active" onclick="setLang('es')" id="lang-es">ES</button>
      <button class="lang-btn" onclick="setLang('en')" id="lang-en">EN</button>
    </div>
  </nav>

  <!-- TRUST BAR -->
  <div class="quiz-trust-bar">
    <span class="trust-stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
    <span data-es="600+ familias ayudadas" data-en="600+ families helped"></span>
    <span class="trust-dot">¬∑</span>
    <span data-es="Consulta gratuita" data-en="Free consultation"></span>
    <span class="trust-dot">¬∑</span>
    <span data-es="Respuesta en menos de 2 horas" data-en="Response in under 2 hours"></span>
  </div>

  <!-- PROGRESS -->
  <div class="progress-wrap">
    <div class="progress-text" id="progress-text"></div>
    <div class="progress-bar"><div class="progress-fill" id="progress-fill"></div></div>
  </div>

  <!-- QUIZ -->
  <div class="quiz-wrap">
    <div class="quiz-card">

      <!-- STEP 0: WELCOME (concept-specific or generic) -->
      <div class="step active" id="step-welcome">
        <div class="welcome-hero">
          <span class="welcome-icon" id="welcome-icon">üìã</span>
          <h1 class="welcome-headline" id="welcome-headline"></h1>
          <p class="welcome-sub" id="welcome-sub"></p>
          <div class="welcome-checks" id="welcome-checks"></div>
          <br>
          <button class="btn-start" onclick="startQuiz()">
            <span id="welcome-cta-text" data-es="Empezar mi evaluaci√≥n gratis" data-en="Start my free evaluation"></span>
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg>
          </button>
          <p class="welcome-time" data-es="‚è± Toma menos de 2 minutos" data-en="‚è± Takes less than 2 minutes"></p>
        </div>
      </div>

      <!-- STEP 1: Urgency -->
      <div class="step" id="step-1">
        <h2 class="step-question" data-es="¬øQu√© tan urgente es tu situaci√≥n?" data-en="How urgent is your situation?"></h2>
        <p class="step-sub" data-es="Tu respuesta nos ayuda a priorizar tu caso." data-en="Your answer helps us prioritize your case."></p>
        <div class="options">
          <button class="option" onclick="selectOption('urgency', 'urgent')">
            <div class="option-icon">üö®</div>
            <div class="option-text">
              <div class="option-label" data-es="Urgente" data-en="Urgent"></div>
              <div class="option-desc" data-es="Tengo fecha de corte, contacto con ICE, o necesito actuar ya" data-en="I have a court date, ICE contact, or need to act now"></div>
            </div>
            <div class="option-check"></div>
          </button>
          <button class="option" onclick="selectOption('urgency', '30-days')">
            <div class="option-icon">üìÖ</div>
            <div class="option-text">
              <div class="option-label" data-es="Dentro de 30 d√≠as" data-en="Within 30 days"></div>
              <div class="option-desc" data-es="Necesito empezar pronto pero no es una emergencia" data-en="I need to start soon but it's not an emergency"></div>
            </div>
            <div class="option-check"></div>
          </button>
          <button class="option" onclick="selectOption('urgency', 'exploring')">
            <div class="option-icon">üîç</div>
            <div class="option-text">
              <div class="option-label" data-es="Estoy explorando mis opciones" data-en="I'm exploring my options"></div>
              <div class="option-desc" data-es="Quiero saber qu√© puedo hacer y cu√°nto cuesta" data-en="I want to know what I can do and how much it costs"></div>
            </div>
            <div class="option-check"></div>
          </button>
        </div>
      </div>

      <!-- STEP 2: Case Type -->
      <div class="step" id="step-2">
        <h2 class="step-question" data-es="¬øQu√© tipo de ayuda necesitas?" data-en="What type of help do you need?"></h2>
        <p class="step-sub" data-es="Selecciona el servicio que mejor describe tu situaci√≥n." data-en="Select the service that best describes your situation."></p>
        <div class="options">
          <button class="option" onclick="selectOption('caseType', 'family')">
            <div class="option-icon">üë®‚Äçüë©‚Äçüëß‚Äçüë¶</div>
            <div class="option-text">
              <div class="option-label" data-es="Peticiones Familiares" data-en="Family Petitions"></div>
              <div class="option-desc" data-es="Ajuste de estatus, residencia, reunificaci√≥n familiar" data-en="Adjustment of status, residency, family reunification"></div>
            </div>
            <div class="option-check"></div>
          </button>
          <button class="option" onclick="selectOption('caseType', 'asylum')">
            <div class="option-icon">üõ°Ô∏è</div>
            <div class="option-text">
              <div class="option-label" data-es="Asilo" data-en="Asylum"></div>
              <div class="option-desc" data-es="Solicitud de asilo y preparaci√≥n para entrevista" data-en="Asylum application and interview preparation"></div>
            </div>
            <div class="option-check"></div>
          </button>
          <button class="option" onclick="selectOption('caseType', 'work-permit')">
            <div class="option-icon">üíº</div>
            <div class="option-text">
              <div class="option-label" data-es="Permiso de Trabajo (EAD)" data-en="Work Permit (EAD)"></div>
              <div class="option-desc" data-es="Autorizaci√≥n de empleo" data-en="Employment authorization"></div>
            </div>
            <div class="option-check"></div>
          </button>
          <button class="option" onclick="selectOption('caseType', 'foia')">
            <div class="option-icon">üìã</div>
            <div class="option-text">
              <div class="option-label" data-es="FOIA / R√©cords de Inmigraci√≥n" data-en="FOIA / Immigration Records"></div>
              <div class="option-desc" data-es="Solicitar tus r√©cords del gobierno" data-en="Request your government records"></div>
            </div>
            <div class="option-check"></div>
          </button>
          <button class="option" onclick="selectOption('caseType', 'marriage')">
            <div class="option-icon">üíç</div>
            <div class="option-text">
              <div class="option-label" data-es="Residencia por Matrimonio" data-en="Marriage Green Card"></div>
              <div class="option-desc" data-es="Green card a trav√©s de c√≥nyuge ciudadano o residente" data-en="Green card through US citizen or resident spouse"></div>
            </div>
            <div class="option-check"></div>
          </button>
          <button class="option" onclick="selectOption('caseType', 'deportation')">
            <div class="option-icon">‚ö†Ô∏è</div>
            <div class="option-text">
              <div class="option-label" data-es="Defensa de Deportaci√≥n" data-en="Deportation Defense"></div>
              <div class="option-desc" data-es="Procedimientos de remoci√≥n, detenci√≥n por ICE" data-en="Removal proceedings, ICE detention"></div>
            </div>
            <div class="option-check"></div>
          </button>
          <button class="option" onclick="selectOption('caseType', 'other')">
            <div class="option-icon">‚ùì</div>
            <div class="option-text">
              <div class="option-label" data-es="Otro / No estoy seguro" data-en="Other / Not sure"></div>
              <div class="option-desc" data-es="DACA, visas, ciudadan√≠a, u otra consulta" data-en="DACA, visas, citizenship, or other inquiry"></div>
            </div>
            <div class="option-check"></div>
          </button>
        </div>
        <div class="btn-row">
          <button class="btn-back" onclick="goBack()" data-es="Atr√°s" data-en="Back"></button>
        </div>
      </div>

      <!-- STEP 2B: Deportation overflow -->
      <div class="step" id="step-2b">
        <h2 class="step-question" data-es="Tu caso necesita un abogado" data-en="Your case needs an attorney"></h2>
        <p class="step-sub" data-es="Los casos de deportaci√≥n requieren representaci√≥n legal de un abogado con licencia. Nosotros preparamos documentos, no representamos en corte. Pero podemos conectarte con un abogado calificado." data-en="Deportation cases require representation from a licensed attorney. We prepare documents, not court representation. But we can connect you with a qualified attorney."></p>
        <div class="trust-callout">
          <svg viewBox="0 0 24 24"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
          <span data-es="D√©janos tu informaci√≥n y te referimos a un abogado de confianza. Sin costo." data-en="Leave us your info and we'll refer you to a trusted attorney. No charge."></span>
        </div>
        <div class="input-group">
          <label class="input-label" data-es="Tu nombre" data-en="Your name"></label>
          <input class="input-field" type="text" id="overflow-name" data-placeholder-es="Nombre completo" data-placeholder-en="Full name">
        </div>
        <div class="input-group">
          <label class="input-label" data-es="Tu tel√©fono" data-en="Your phone"></label>
          <input class="input-field" type="tel" id="overflow-phone" data-placeholder-es="(786) 000-0000" data-placeholder-en="(786) 000-0000">
        </div>
        <div class="input-group">
          <label class="input-label" data-es="Tu estado" data-en="Your state"></label>
          <input class="input-field" type="text" id="overflow-state" data-placeholder-es="Ej: Florida, Texas" data-placeholder-en="E.g.: Florida, Texas">
        </div>
        <a id="overflow-wa-cta" href="#" class="btn-wa" target="_blank" rel="noopener" onclick="fireOverflowLead()">
          <span data-es="Enviar y conectar con abogado" data-en="Submit and connect with attorney"></span>
        </a>
        <div class="btn-row">
          <button class="btn-back" onclick="navigateTo('step-2')" data-es="Atr√°s" data-en="Back"></button>
        </div>
      </div>

      <!-- STEP 3: Status -->
      <div class="step" id="step-3">
        <h2 class="step-question" data-es="¬øCu√°l es tu estatus migratorio actual?" data-en="What is your current immigration status?"></h2>
        <p class="step-sub" data-es="Esto nos ayuda a entender qu√© opciones tienes disponibles." data-en="This helps us understand what options are available to you."></p>
        <div class="options">
          <button class="option" onclick="selectOption('status', 'undocumented')">
            <div class="option-text"><div class="option-label" data-es="Sin documentos" data-en="Undocumented"></div></div>
            <div class="option-check"></div>
          </button>
          <button class="option" onclick="selectOption('status', 'visa-holder')">
            <div class="option-text"><div class="option-label" data-es="Tengo visa" data-en="Visa holder"></div></div>
            <div class="option-check"></div>
          </button>
          <button class="option" onclick="selectOption('status', 'green-card')">
            <div class="option-text"><div class="option-label" data-es="Residente permanente (Green Card)" data-en="Permanent resident (Green Card)"></div></div>
            <div class="option-check"></div>
          </button>
          <button class="option" onclick="selectOption('status', 'tps-daca')">
            <div class="option-text"><div class="option-label" data-es="TPS o DACA" data-en="TPS or DACA"></div></div>
            <div class="option-check"></div>
          </button>
          <button class="option" onclick="selectOption('status', 'citizen-helping')">
            <div class="option-text"><div class="option-label" data-es="Ciudadano ayudando a un familiar" data-en="US citizen helping a family member"></div></div>
            <div class="option-check"></div>
          </button>
          <button class="option" onclick="selectOption('status', 'other-status')">
            <div class="option-text"><div class="option-label" data-es="Otro / No estoy seguro" data-en="Other / Not sure"></div></div>
            <div class="option-check"></div>
          </button>
        </div>
        <div class="btn-row">
          <button class="btn-back" onclick="goBack()" data-es="Atr√°s" data-en="Back"></button>
        </div>
      </div>

      <!-- STEP 4: Location -->
      <div class="step" id="step-4">
        <h2 class="step-question" data-es="¬øD√≥nde te encuentras?" data-en="Where are you located?"></h2>
        <p class="step-sub" data-es="Necesitamos tu ubicaci√≥n para conectarte con el servicio correcto." data-en="We need your location to connect you with the right service."></p>
        <div class="input-group">
          <label class="input-label" data-es="Estado" data-en="State"></label>
          <select class="input-field" id="input-state" onchange="checkLocationStep()">
            <option value="" data-es="Selecciona tu estado" data-en="Select your state"></option>
            <option value="CA">California</option>
            <option value="TX">Texas</option>
            <option value="FL">Florida</option>
            <option value="NY">New York</option>
            <option value="AZ">Arizona</option>
            <option value="IL">Illinois</option>
            <option value="NJ">New Jersey</option>
            <option value="GA">Georgia</option>
            <option value="NC">North Carolina</option>
            <option value="VA">Virginia</option>
            <option value="MD">Maryland</option>
            <option value="NV">Nevada</option>
            <option value="CO">Colorado</option>
            <option value="WA">Washington</option>
            <option value="MA">Massachusetts</option>
            <option value="OTHER" data-es="Otro estado" data-en="Other state">Otro / Other</option>
          </select>
        </div>
        <div class="input-group">
          <label class="input-label" data-es="Ciudad" data-en="City"></label>
          <input class="input-field" type="text" id="input-city" oninput="checkLocationStep()" data-placeholder-es="Tu ciudad" data-placeholder-en="Your city">
        </div>
        <div class="btn-row">
          <button class="btn-back" onclick="goBack()" data-es="Atr√°s" data-en="Back"></button>
          <button class="btn-next" id="btn-location" onclick="advanceFromLocation()" disabled data-es="Continuar" data-en="Continue"></button>
        </div>
      </div>

      <!-- STEP 5: Entry Method -->
      <div class="step" id="step-5">
        <h2 class="step-question" data-es="¬øC√≥mo ingresaste a los Estados Unidos?" data-en="How did you enter the United States?"></h2>
        <p class="step-sub" data-es="Para saber qu√© opciones legales tienes, necesitamos entender c√≥mo llegaste. No importa c√≥mo ‚Äî hay opciones para cada situaci√≥n." data-en="To know what legal options you have, we need to understand how you arrived. No matter how ‚Äî there are options for every situation."></p>
        <div class="trust-callout">
          <svg viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
          <span data-es="Tu informaci√≥n est√° protegida. No se comparte con ninguna agencia del gobierno. Solo la usa Erika para evaluar tu caso." data-en="Your information is protected. It is not shared with any government agency. Only Erika uses it to evaluate your case."></span>
        </div>
        <div class="options">
          <button class="option" onclick="selectOption('entryMethod', 'visa-entry')">
            <div class="option-text">
              <div class="option-label" data-es="Entr√© con visa" data-en="I entered with a visa"></div>
              <div class="option-desc" data-es="Visa de turista, trabajo, estudiante u otra" data-en="Tourist, work, student, or other visa"></div>
            </div>
            <div class="option-check"></div>
          </button>
          <button class="option" onclick="selectOption('entryMethod', 'border-parole')">
            <div class="option-text">
              <div class="option-label" data-es="Entr√© por la frontera con parole" data-en="I entered at the border with parole"></div>
              <div class="option-desc" data-es="CBP One, parole humanitario u otro programa" data-en="CBP One, humanitarian parole, or other program"></div>
            </div>
            <div class="option-check"></div>
          </button>
          <button class="option" onclick="selectOption('entryMethod', 'without-inspection')">
            <div class="option-text">
              <div class="option-label" data-es="Entr√© sin inspecci√≥n" data-en="I entered without inspection"></div>
              <div class="option-desc" data-es="Cruc√© sin pasar por un punto de entrada oficial" data-en="I crossed without going through an official port of entry"></div>
            </div>
            <div class="option-check"></div>
          </button>
          <button class="option" onclick="selectOption('entryMethod', 'overstay')">
            <div class="option-text">
              <div class="option-label" data-es="Mi visa expir√≥ y me qued√©" data-en="My visa expired and I stayed"></div>
            </div>
            <div class="option-check"></div>
          </button>
          <button class="option" onclick="selectOption('entryMethod', 'born-here')">
            <div class="option-text">
              <div class="option-label" data-es="Nac√≠ aqu√≠ / Soy ciudadano ayudando a alguien" data-en="I was born here / I'm a citizen helping someone"></div>
            </div>
            <div class="option-check"></div>
          </button>
          <button class="option" onclick="selectOption('entryMethod', 'not-sure-entry')">
            <div class="option-text">
              <div class="option-label" data-es="Prefiero discutirlo con Erika" data-en="I'd rather discuss with Erika"></div>
            </div>
            <div class="option-check"></div>
          </button>
        </div>
        <div class="btn-row">
          <button class="btn-back" onclick="goBack()" data-es="Atr√°s" data-en="Back"></button>
        </div>
      </div>

      <!-- STEP 6: Contact -->
      <div class="step" id="step-6">
        <h2 class="step-question" data-es="√öltimo paso ‚Äî ¬øc√≥mo te contactamos?" data-en="Last step ‚Äî how do we reach you?"></h2>
        <p class="step-sub" data-es="Erika revisar√° tu caso personalmente y te responder√° en menos de 2 horas." data-en="Erika will personally review your case and respond in under 2 hours."></p>
        <div class="inline-testimonial">
          <p data-es="\"Ten√≠a mucho miedo de empezar el proceso. Erika me explic√≥ todo paso a paso y en 9 d√≠as ya ten√≠a mis documentos. Nunca pens√© que ser√≠a tan f√°cil.\"" data-en="\"I was very afraid to start the process. Erika explained everything step by step and in 9 days I already had my documents. I never thought it would be so easy.\""></p>
          <span class="testimonial-attr" data-es="‚Äî Cliente verificada, Miami FL" data-en="‚Äî Verified client, Miami FL"></span>
        </div>
        <div class="input-row">
          <div class="input-group">
            <label class="input-label" data-es="Nombre" data-en="First name"></label>
            <input class="input-field" type="text" id="input-fname" oninput="checkContactStep()" data-placeholder-es="Tu nombre" data-placeholder-en="First name">
          </div>
          <div class="input-group">
            <label class="input-label" data-es="Apellido" data-en="Last name"></label>
            <input class="input-field" type="text" id="input-lname" oninput="checkContactStep()" data-placeholder-es="Tu apellido" data-placeholder-en="Last name">
          </div>
        </div>
        <div class="input-group">
          <label class="input-label" data-es="Tel√©fono" data-en="Phone"></label>
          <input class="input-field" type="tel" id="input-phone" oninput="checkContactStep()" data-placeholder-es="(786) 000-0000" data-placeholder-en="(786) 000-0000">
        </div>
        <div class="input-group">
          <label class="input-label" data-es="Correo electr√≥nico" data-en="Email"></label>
          <input class="input-field" type="email" id="input-email" oninput="checkContactStep()" data-placeholder-es="tu@correo.com" data-placeholder-en="you@email.com">
        </div>
        <div class="btn-row">
          <button class="btn-back" onclick="goBack()" data-es="Atr√°s" data-en="Back"></button>
          <button class="btn-next" id="btn-contact" onclick="showSummary()" disabled data-es="Ver resumen" data-en="View summary"></button>
        </div>
      </div>

      <!-- STEP 7: Summary + WhatsApp -->
      <div class="step" id="step-7">
        <h2 class="step-question" data-es="¬°Listo! Habla con Erika ahora" data-en="Done! Talk to Erika now"></h2>
        <p class="step-sub" data-es="Revisa tu informaci√≥n y env√≠ale un mensaje para que eval√∫e tu caso personalmente." data-en="Review your info and send her a message so she can personally evaluate your case."></p>
        <div class="summary-list" id="summary-list"></div>
        <a id="wa-cta" href="#" class="btn-wa" target="_blank" rel="noopener" onclick="fireLeadPixel()">
          <svg viewBox="0 0 24 24" width="22" height="22"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347z" fill="white"/><path d="M12 0C5.373 0 0 5.373 0 12c0 2.625.846 5.059 2.284 7.034L.789 23.492a.5.5 0 00.613.613l4.458-1.495A11.94 11.94 0 0012 24c6.627 0 12-5.373 12-12S18.627 0 12 0zm0 22c-2.24 0-4.327-.722-6.016-1.95l-.42-.318-2.651.889.889-2.651-.318-.42A9.935 9.935 0 012 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10z" fill="white" fill-rule="evenodd"/></svg>
          <span data-es="Hablar con Erika ahora" data-en="Talk to Erika now"></span>
        </a>
        <div class="wa-subtext" data-es="Erika responde en menos de 2 horas. Solo acepta 5 casos nuevos por semana." data-en="Erika responds in under 2 hours. She only accepts 5 new cases per week."></div>
      </div>

    </div>
  </div>

  <!-- TRUST FOOTER -->
  <div class="trust-footer">
    <div class="trust-badges">
      <div class="trust-badge">
        <svg viewBox="0 0 24 24"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
        <span data-es="100% Confidencial" data-en="100% Confidential"></span>
      </div>
      <div class="trust-badge">
        <svg viewBox="0 0 24 24"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
        <span data-es="600+ Clientes" data-en="600+ Clients"></span>
      </div>
      <div class="trust-badge">
        <svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>
        <span data-es="Biling√ºe" data-en="Bilingual"></span>
      </div>
    </div>
    <p data-es="Erika Parra Services es un servicio de preparaci√≥n de formularios de inmigraci√≥n. No somos abogados y no proporcionamos asesor√≠a legal." data-en="Erika Parra Services is an immigration forms preparation service. We are not attorneys and do not provide legal advice."></p>
  </div>

  <script>
    // ‚îÄ‚îÄ STATE ‚îÄ‚îÄ
    let lang = 'es';
    const answers = {};
    let leadPixelFired = false;
    let concept = null; // from URL param ?c=
    let flowSteps = []; // dynamic step order
    let currentFlowIndex = 0;

    // ‚îÄ‚îÄ CONCEPT DEFINITIONS ‚îÄ‚îÄ
    // Each concept defines: welcome screen content, pre-filled answers, and which steps to skip
    const concepts = {
      foia: {
        icon: 'üìã',
        headline: { es: 'Vamos a recuperar tu expediente migratorio', en: 'We\'ll recover your immigration file' },
        sub: { es: 'Alguien present√≥ documentos en tu nombre y nunca te dieron copias. Nosotros los recuperamos, los revisamos contigo, y te explicamos todo.', en: 'Someone filed documents on your behalf and never gave you copies. We recover them, review them with you, and explain everything.' },
        checks: {
          es: ['Recuperaci√≥n de tu expediente completo', 'Revisi√≥n l√≠nea por l√≠nea contigo', 'Todo 100% confidencial'],
          en: ['Full file recovery', 'Line by line review with you', 'Everything 100% confidential']
        },
        prefill: { caseType: 'foia' },
        skipSteps: ['step-2'] // case type already known
      },
      asylum: {
        icon: 'üõ°Ô∏è',
        headline: { es: 'Te preparamos para tu entrevista de asilo', en: 'We\'ll prepare you for your asylum interview' },
        sub: { es: 'Si te llamaron a entrevista, tienes una oportunidad. Pero necesitas llegar preparado. Te guiamos paso a paso: qu√© llevar, qu√© decir, qu√© esperar.', en: 'If you\'ve been called for an interview, you have an opportunity. But you need to arrive prepared. We guide you step by step.' },
        checks: {
          es: ['Pr√°ctica con las preguntas reales', 'Organizaci√≥n completa de tu evidencia', 'Preparaci√≥n en 48 horas o menos'],
          en: ['Practice with real questions', 'Complete evidence organization', 'Preparation in 48 hours or less']
        },
        prefill: { caseType: 'asylum' },
        skipSteps: ['step-2']
      },
      badpreparer: {
        icon: '‚ö†Ô∏è',
        headline: { es: 'Confiaste en alguien que no sab√≠a. Te mostramos lo que fue enviado.', en: 'You trusted someone who didn\'t know. We\'ll show you what was filed.' },
        sub: { es: 'El 80% de las personas que vienen a nosotros descubren errores en su caso anterior. Recuperamos lo que fue presentado, te mostramos todo, y corregimos lo que se pueda.', en: '80% of people who come to us discover errors in their previous case. We recover what was filed, show you everything, and correct what we can.' },
        checks: {
          es: ['Recuperamos lo que fue presentado', 'Te mostramos exactamente qu√© errores hay', 'Corregimos y protegemos tu futuro'],
          en: ['We recover what was filed', 'We show you exactly what errors exist', 'We correct and protect your future']
        },
        prefill: { caseType: 'foia' },
        skipSteps: ['step-2']
      },
      deportfear: {
        icon: 'üîí',
        headline: { es: 'El miedo no resuelve tu caso. La informaci√≥n s√≠.', en: 'Fear doesn\'t solve your case. Information does.' },
        sub: { es: 'Entendemos tu miedo. M√°s de 600 familias han venido con la misma preocupaci√≥n. La mayor√≠a descubri√≥ que su situaci√≥n no era tan mala ‚Äî solo necesitaban informaci√≥n real y confidencial.', en: 'We understand your fear. 600+ families have come with the same worry. Most discovered their situation wasn\'t as bad as they thought ‚Äî they just needed real, confidential information.' },
        checks: {
          es: ['Evaluaci√≥n 100% confidencial', 'Te explicamos tus opciones reales', 'Nadie m√°s ve tu informaci√≥n'],
          en: ['100% confidential evaluation', 'We explain your real options', 'No one else sees your information']
        },
        prefill: { urgency: 'urgent' },
        skipSteps: ['step-1'] // urgency implied
      },
      marriage: {
        icon: 'üíç',
        headline: { es: 'Tu residencia por matrimonio puede estar m√°s cerca de lo que piensas', en: 'Your marriage green card may be closer than you think' },
        sub: { es: 'Si te casaste con un ciudadano americano o residente permanente, puedes calificar para tu residencia. Un error en la petici√≥n puede retrasar tu caso meses. Nosotros lo hacemos bien desde el principio.', en: 'If you married a US citizen or permanent resident, you may qualify for residency. One mistake can delay your case months. We do it right from the start.' },
        checks: {
          es: ['Preparaci√≥n completa de la petici√≥n familiar', 'Organizaci√≥n de toda la evidencia', 'Te guiamos paso a paso'],
          en: ['Complete family petition preparation', 'All evidence organized', 'We guide you step by step']
        },
        prefill: { caseType: 'marriage' },
        skipSteps: ['step-2']
      },
      venezuela: {
        icon: 'üáªüá™',
        headline: { es: 'Venezolano con caso de asilo pendiente? Tu caso necesita evidencia actual.', en: 'Venezuelan with pending asylum? Your case needs current evidence.' },
        sub: { es: 'La situaci√≥n en Venezuela cambi√≥. Inmigraci√≥n eval√∫a tu caso con la realidad de hoy. Necesitas evidencia actualizada de 2026. Nosotros la organizamos por ti.', en: 'The situation in Venezuela changed. Immigration evaluates your case with today\'s reality. You need updated 2026 evidence. We organize it for you.' },
        checks: {
          es: ['Revisamos tu caso l√≠nea por l√≠nea', 'Actualizamos tu evidencia con la realidad de 2026', 'Fortalecemos tu argumento de asilo'],
          en: ['We review your case line by line', 'We update your evidence with 2026 reality', 'We strengthen your asylum argument']
        },
        prefill: { caseType: 'asylum' },
        skipSteps: ['step-2']
      }
    };

    // Map URL param values to concept keys
    const conceptMap = {
      'foia': 'foia', 'c006': 'foia',
      'asylum': 'asylum', 'c007': 'asylum',
      'badpreparer': 'badpreparer', 'bad': 'badpreparer', 'c008': 'badpreparer',
      'deportfear': 'deportfear', 'deport': 'deportfear', 'fear': 'deportfear', 'c009': 'deportfear',
      'marriage': 'marriage', 'c010': 'marriage',
      'venezuela': 'venezuela', 'vzla': 'venezuela', 'c011': 'venezuela'
    };

    // ‚îÄ‚îÄ LABELS ‚îÄ‚îÄ
    const labels = {
      urgency: {
        es: { urgent: 'Urgente', '30-days': 'Dentro de 30 d√≠as', exploring: 'Explorando opciones' },
        en: { urgent: 'Urgent', '30-days': 'Within 30 days', exploring: 'Exploring options' }
      },
      caseType: {
        es: { family: 'Peticiones Familiares', asylum: 'Asilo', 'work-permit': 'Permiso de Trabajo', foia: 'FOIA', marriage: 'Residencia por Matrimonio', deportation: 'Defensa de Deportaci√≥n', other: 'Otro' },
        en: { family: 'Family Petitions', asylum: 'Asylum', 'work-permit': 'Work Permit', foia: 'FOIA', marriage: 'Marriage Green Card', deportation: 'Deportation Defense', other: 'Other' }
      },
      status: {
        es: { undocumented: 'Sin documentos', 'visa-holder': 'Tengo visa', 'green-card': 'Residente permanente', 'tps-daca': 'TPS o DACA', 'citizen-helping': 'Ciudadano ayudando a familiar', 'other-status': 'Otro' },
        en: { undocumented: 'Undocumented', 'visa-holder': 'Visa holder', 'green-card': 'Permanent resident', 'tps-daca': 'TPS or DACA', 'citizen-helping': 'US citizen helping family', 'other-status': 'Other' }
      },
      entryMethod: {
        es: { 'visa-entry': 'Entr√© con visa', 'border-parole': 'Parole en la frontera', 'without-inspection': 'Entr√© sin inspecci√≥n', 'overstay': 'Visa expirada', 'born-here': 'Nac√≠ aqu√≠ / Ciudadano', 'not-sure-entry': 'Prefiere discutir con Erika' },
        en: { 'visa-entry': 'Entered with visa', 'border-parole': 'Border parole', 'without-inspection': 'Entered without inspection', 'overstay': 'Visa overstay', 'born-here': 'Born here / US Citizen', 'not-sure-entry': 'Prefers to discuss with Erika' }
      }
    };

    // ‚îÄ‚îÄ ALL POSSIBLE STEPS (in order) ‚îÄ‚îÄ
    const allSteps = ['step-welcome', 'step-1', 'step-2', 'step-3', 'step-4', 'step-5', 'step-6', 'step-7'];

    // ‚îÄ‚îÄ INIT ‚îÄ‚îÄ
    function init() {
      // Read ?c= param
      const params = new URLSearchParams(window.location.search);
      const cParam = (params.get('c') || '').toLowerCase();
      concept = conceptMap[cParam] || null;

      // Build dynamic flow
      const skipSet = new Set();
      if (concept && concepts[concept]) {
        const c = concepts[concept];
        // Pre-fill answers
        Object.assign(answers, c.prefill);
        // Mark steps to skip
        (c.skipSteps || []).forEach(s => skipSet.add(s));
        // Set welcome content
        document.getElementById('welcome-icon').textContent = c.icon;
        document.getElementById('welcome-headline').textContent = c.headline[lang];
        document.getElementById('welcome-sub').textContent = c.sub[lang];
        const checksHtml = c.checks[lang].map(t => '<div><span>‚úì</span> ' + t + '</div>').join('');
        document.getElementById('welcome-checks').innerHTML = checksHtml;
      } else {
        // Generic welcome
        document.getElementById('welcome-icon').textContent = 'üèõÔ∏è';
        document.getElementById('welcome-headline').textContent = lang === 'es'
          ? 'Tu evaluaci√≥n migratoria gratuita empieza aqu√≠'
          : 'Your free immigration evaluation starts here';
        document.getElementById('welcome-sub').textContent = lang === 'es'
          ? 'Responde unas preguntas y Erika evaluar√° tu caso personalmente. Es gratis, confidencial, y te responde en menos de 2 horas.'
          : 'Answer a few questions and Erika will personally evaluate your case. It\'s free, confidential, and she responds in under 2 hours.';
        const genericChecks = lang === 'es'
          ? ['Evaluaci√≥n personalizada de tu caso', '600+ familias ya conf√≠an en nosotros', '100% confidencial ‚Äî no se comparte con nadie']
          : ['Personalized case evaluation', '600+ families already trust us', '100% confidential ‚Äî not shared with anyone'];
        document.getElementById('welcome-checks').innerHTML = genericChecks.map(t => '<div><span>‚úì</span> ' + t + '</div>').join('');
      }

      // Build flow: welcome + all non-skipped steps
      flowSteps = allSteps.filter(s => !skipSet.has(s));
      currentFlowIndex = 0;

      // Fire pixel for concept
      if (concept) {
        fbq('trackCustom', 'QuizCaseType', { caseType: answers.caseType || concept, source: 'ad_concept' });
      }

      setLang(lang);
      updateProgress();
    }

    // ‚îÄ‚îÄ LANGUAGE ‚îÄ‚îÄ
    function setLang(l) {
      lang = l;
      document.getElementById('lang-es').classList.toggle('active', l === 'es');
      document.getElementById('lang-en').classList.toggle('active', l === 'en');
      document.documentElement.lang = l;
      document.querySelectorAll('[data-' + l + ']').forEach(el => el.textContent = el.getAttribute('data-' + l));
      document.querySelectorAll('[data-placeholder-' + l + ']').forEach(el => el.placeholder = el.getAttribute('data-placeholder-' + l));
      document.querySelectorAll('option[data-' + l + ']').forEach(el => el.textContent = el.getAttribute('data-' + l));

      // Re-render welcome if concept-specific
      if (concept && concepts[concept]) {
        const c = concepts[concept];
        document.getElementById('welcome-headline').textContent = c.headline[lang];
        document.getElementById('welcome-sub').textContent = c.sub[lang];
        document.getElementById('welcome-checks').innerHTML = c.checks[lang].map(t => '<div><span>‚úì</span> ' + t + '</div>').join('');
      } else {
        document.getElementById('welcome-headline').textContent = lang === 'es'
          ? 'Tu evaluaci√≥n migratoria gratuita empieza aqu√≠'
          : 'Your free immigration evaluation starts here';
        document.getElementById('welcome-sub').textContent = lang === 'es'
          ? 'Responde unas preguntas y Erika evaluar√° tu caso personalmente. Es gratis, confidencial, y te responde en menos de 2 horas.'
          : 'Answer a few questions and Erika will personally evaluate your case. It\'s free, confidential, and she responds in under 2 hours.';
        const genericChecks = lang === 'es'
          ? ['Evaluaci√≥n personalizada de tu caso', '600+ familias ya conf√≠an en nosotros', '100% confidencial ‚Äî no se comparte con nadie']
          : ['Personalized case evaluation', '600+ families already trust us', '100% confidential ‚Äî not shared with anyone'];
        document.getElementById('welcome-checks').innerHTML = genericChecks.map(t => '<div><span>‚úì</span> ' + t + '</div>').join('');
      }
      updateProgress();
    }

    // ‚îÄ‚îÄ NAVIGATION ‚îÄ‚îÄ
    function navigateTo(stepId) {
      document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
      document.getElementById(stepId).classList.add('active');
      currentFlowIndex = flowSteps.indexOf(stepId);
      if (currentFlowIndex === -1) currentFlowIndex = 0;
      updateProgress();
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function startQuiz() {
      // Move to next step after welcome
      currentFlowIndex = 1;
      if (currentFlowIndex < flowSteps.length) {
        navigateTo(flowSteps[currentFlowIndex]);
      }
    }

    function goBack() {
      if (currentFlowIndex > 0) {
        currentFlowIndex--;
        navigateTo(flowSteps[currentFlowIndex]);
      }
    }

    function advanceFlow() {
      currentFlowIndex++;
      if (currentFlowIndex < flowSteps.length) {
        navigateTo(flowSteps[currentFlowIndex]);
      }
    }

    function advanceFromLocation() {
      answers.state = document.getElementById('input-state').value;
      answers.city = document.getElementById('input-city').value.trim();
      advanceFlow();
    }

    // ‚îÄ‚îÄ PROGRESS ‚îÄ‚îÄ
    function updateProgress() {
      // Exclude welcome and step-7 from count
      const quizSteps = flowSteps.filter(s => s !== 'step-welcome' && s !== 'step-7' && s !== 'step-2b');
      const totalQ = quizSteps.length;
      let currentQ = 0;
      const currentStep = flowSteps[currentFlowIndex];

      if (currentStep === 'step-welcome') {
        currentQ = 0;
      } else if (currentStep === 'step-7') {
        currentQ = totalQ;
      } else {
        currentQ = quizSteps.indexOf(currentStep) + 1;
      }

      const pct = totalQ > 0 ? Math.round((currentQ / totalQ) * 100) : 0;
      document.getElementById('progress-fill').style.width = pct + '%';

      const stepNames = {
        es: { 'step-welcome': 'Inicio', 'step-1': 'Urgencia', 'step-2': 'Servicio', 'step-3': 'Estatus', 'step-4': 'Ubicaci√≥n', 'step-5': 'Entrada al pa√≠s', 'step-6': 'Contacto', 'step-7': 'Listo' },
        en: { 'step-welcome': 'Start', 'step-1': 'Urgency', 'step-2': 'Service', 'step-3': 'Status', 'step-4': 'Location', 'step-5': 'Entry method', 'step-6': 'Contact', 'step-7': 'Done' }
      };

      if (currentStep === 'step-welcome') {
        document.getElementById('progress-text').textContent = '';
      } else if (currentStep === 'step-7') {
        document.getElementById('progress-text').textContent = lang === 'es' ? 'Listo para conectar' : 'Ready to connect';
      } else {
        document.getElementById('progress-text').textContent =
          (lang === 'es' ? 'Paso ' : 'Step ') + currentQ + ' / ' + totalQ + ' ‚Äî ' + (stepNames[lang][currentStep] || '');
      }
    }

    // ‚îÄ‚îÄ SELECT OPTIONS ‚îÄ‚îÄ
    function selectOption(field, value) {
      const currentStep = flowSteps[currentFlowIndex];
      const stepEl = document.getElementById(currentStep);
      stepEl.querySelectorAll('.option').forEach(o => o.classList.remove('selected'));
      event.currentTarget.classList.add('selected');

      answers[field] = value;

      // Deportation overflow
      if (field === 'caseType' && value === 'deportation') {
        fbq('trackCustom', 'QuizCaseType', { caseType: value });
        setTimeout(() => navigateTo('step-2b'), 300);
        return;
      }

      // Fire case type pixel
      if (field === 'caseType') {
        fbq('trackCustom', 'QuizCaseType', { caseType: value });
      }

      setTimeout(() => advanceFlow(), 300);
    }

    // ‚îÄ‚îÄ VALIDATIONS ‚îÄ‚îÄ
    function checkLocationStep() {
      const state = document.getElementById('input-state').value;
      const city = document.getElementById('input-city').value.trim();
      document.getElementById('btn-location').disabled = !(state && city.length >= 2);
    }

    function checkContactStep() {
      const fname = document.getElementById('input-fname').value.trim();
      const lname = document.getElementById('input-lname').value.trim();
      const phone = document.getElementById('input-phone').value.trim();
      const email = document.getElementById('input-email').value.trim();
      document.getElementById('btn-contact').disabled = !(fname.length >= 2 && lname.length >= 1 && phone.length >= 7 && email.includes('@'));
    }

    // ‚îÄ‚îÄ SUMMARY ‚îÄ‚îÄ
    function showSummary() {
      if (!answers.state) {
        answers.state = document.getElementById('input-state').value;
        answers.city = document.getElementById('input-city').value.trim();
      }
      answers.firstName = document.getElementById('input-fname').value.trim();
      answers.lastName = document.getElementById('input-lname').value.trim();
      answers.phone = document.getElementById('input-phone').value.trim();
      answers.email = document.getElementById('input-email').value.trim();
      answers.fullName = answers.firstName + ' ' + answers.lastName;

      const rows = [];
      if (answers.urgency) rows.push({ l: lang === 'es' ? 'Urgencia' : 'Urgency', v: (labels.urgency[lang] || {})[answers.urgency] || answers.urgency });
      if (answers.caseType) rows.push({ l: lang === 'es' ? 'Servicio' : 'Service', v: (labels.caseType[lang] || {})[answers.caseType] || answers.caseType });
      if (answers.status) rows.push({ l: lang === 'es' ? 'Estatus' : 'Status', v: (labels.status[lang] || {})[answers.status] || answers.status });
      if (answers.city) rows.push({ l: lang === 'es' ? 'Ubicaci√≥n' : 'Location', v: answers.city + ', ' + answers.state });
      if (answers.entryMethod) rows.push({ l: lang === 'es' ? 'Entrada' : 'Entry', v: (labels.entryMethod[lang] || {})[answers.entryMethod] || answers.entryMethod });
      rows.push({ l: lang === 'es' ? 'Nombre' : 'Name', v: answers.fullName });
      rows.push({ l: lang === 'es' ? 'Tel√©fono' : 'Phone', v: answers.phone });
      rows.push({ l: 'Email', v: answers.email });

      document.getElementById('summary-list').innerHTML = rows.map(r =>
        '<div class="summary-item"><span class="summary-label">' + r.l + '</span><span class="summary-value">' + r.v + '</span></div>'
      ).join('');

      // WhatsApp message
      const parts = ['Hola Erika, estoy buscando ayuda con mi caso de inmigraci√≥n.\n'];
      if (answers.urgency) parts.push('‚Ä¢ Urgencia: ' + (labels.urgency.es[answers.urgency] || answers.urgency));
      if (answers.caseType) parts.push('‚Ä¢ Servicio: ' + (labels.caseType.es[answers.caseType] || answers.caseType));
      if (answers.status) parts.push('‚Ä¢ Mi estatus: ' + (labels.status.es[answers.status] || answers.status));
      if (answers.entryMethod) parts.push('‚Ä¢ C√≥mo ingres√©: ' + (labels.entryMethod.es[answers.entryMethod] || answers.entryMethod));
      if (answers.city) parts.push('‚Ä¢ Ubicaci√≥n: ' + answers.city + ', ' + answers.state);
      parts.push('‚Ä¢ Nombre: ' + answers.fullName);
      parts.push('‚Ä¢ Tel√©fono: ' + answers.phone);
      parts.push('‚Ä¢ Email: ' + answers.email);
      parts.push('\nMe gustar√≠a saber si puedes ayudarme. ¬°Gracias!');

      document.getElementById('wa-cta').href = 'https://wa.me/17868306859?text=' + encodeURIComponent(parts.join('\n'));

      logToSheet();
      navigateTo('step-7');
    }

    // ‚îÄ‚îÄ LEAD PIXEL (only on WA click) ‚îÄ‚îÄ
    function fireLeadPixel() {
      if (leadPixelFired) return;
      leadPixelFired = true;
      fbq('track', 'Lead', {
        content_name: answers.caseType || concept || 'generic',
        content_category: concept ? 'ad_concept_' + concept : 'organic',
        value: 1,
        currency: 'USD'
      });
    }

    // ‚îÄ‚îÄ OVERFLOW (deportation) ‚îÄ‚îÄ
    function fireOverflowLead() {
      const name = document.getElementById('overflow-name').value.trim();
      const phone = document.getElementById('overflow-phone').value.trim();
      const state = document.getElementById('overflow-state').value.trim();
      const waMsg = 'Hola Erika, necesito ayuda urgente con un caso de deportaci√≥n.\n\n‚Ä¢ Nombre: ' + name + '\n‚Ä¢ Tel√©fono: ' + phone + '\n‚Ä¢ Estado: ' + state + '\n\nMe dijeron que necesito un abogado. ¬øMe pueden referir a alguien?';
      document.getElementById('overflow-wa-cta').href = 'https://wa.me/17868306859?text=' + encodeURIComponent(waMsg);
      fetch(APPS_SCRIPT_URL, {
        method: 'POST', mode: 'no-cors',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ name: name, phone: phone, caseType: 'Deportaci√≥n (overflow)', location: state, urgency: answers.urgency || 'N/A', lang: lang })
      }).catch(function() {});
      fbq('track', 'Lead', { content_name: 'deportation', content_category: 'overflow', value: 0, currency: 'USD' });
    }

    // ‚îÄ‚îÄ SHEET LOGGER ‚îÄ‚îÄ
    const APPS_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbxHYYWBx1E3SkstULaG2fpaZ9BF7Z__dfDMMqFglOl3kJHEUrFYCzVftRX3uP3VpMw/exec';

    function logToSheet() {
      fetch(APPS_SCRIPT_URL, {
        method: 'POST', mode: 'no-cors',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          name: answers.fullName,
          firstName: answers.firstName,
          lastName: answers.lastName,
          phone: answers.phone,
          email: answers.email,
          caseType: (labels.caseType[lang] || {})[answers.caseType] || answers.caseType || '',
          status: (labels.status[lang] || {})[answers.status] || answers.status || '',
          entryMethod: (labels.entryMethod[lang] || {})[answers.entryMethod] || answers.entryMethod || '',
          urgency: (labels.urgency[lang] || {})[answers.urgency] || answers.urgency || '',
          location: (answers.city || '') + ', ' + (answers.state || ''),
          lang: lang,
          concept: concept || 'organic'
        })
      }).catch(function() {});
    }

    // ‚îÄ‚îÄ BOOT ‚îÄ‚îÄ
    init();
  </script>

</body>
</html>
